import { Callout } from 'nextra-theme-docs'
import TokenLinkCode from '../components/TokenLinkCode'

# CLI

```sh
$ haetae [<options>] [<command>]
$ ht [<options>] [<command>]
```

**`ht`** is a shorthand alias of **`haetae`**.

For example:

```sh
$ ht --help # Equal to `haetae --help`
$ ht --version # Equal to `haetae --version`
```

## Commands

You define your commands in the config file.<br/>

For example,

<TokenLinkCode tokens={{
  '.configure': './apis/haetae-core#configure',
  '$': './apis/haetae-utils#dollar'
}}>
```js filename="haetae.config.js"
import { $, core } from 'haetae'

export default core.configure({
  // Other options are omitted for brevity.
  commands: {
    myAwesomeCommand: {
      run: async () => {
        const stdout = await $`echo hello, world!`
        console.log(stdout)
      },
      env: { /* ommitted for brevity. */ }
    },
    myAnotherCommand: {
      run: async () => {
        const stdout = await $`echo hi, there!`
        console.log(stdout)
      },
      env: { /* ommitted for brevity. */ }
    },
    // ... more commands
  },
})
```
</TokenLinkCode>

Then the commands become available from the CLI.<br/>

```sh
$ haetae myAwesomeCommand

hello world!
```

```sh
$ haetae myAnotherCommand

hi, there!
```

## Options

### `-h, --help`
<br/>
<small>(**Type** : `boolean`, **Default**: `false{:ts}`)</small>

If specified, usage help is shown.

#### Usage

```sh
$ haetae --help
```

#### Conflicts

This option should not be used with other options.

### `-v, --version`
<br/>
<small>(**Type** : `boolean`, **Default**: `false{:ts}`)</small>

If specified, the version of cli is shown.

<Callout>
It is version of [`@haetae/cli{:ts}`](./apis/haetae-cli), not version of other `@haetae/*{:ts}` (e.g. `@haetae/core{:ts}`) or the package [`haetae{:ts}`](./apis/haetae).
If you want to know comprehensive versions, use [`-i, --info{:sh}`](#-i---info).
</Callout>

#### Usage

```sh
$ haetae --version
```

#### Conflicts

This option should not be used with other options.

### `-c, --config`
<br/>
<small>(**Type** : `string`)</small>

A config file path.

#### Usage

```sh
$ haetae --config path/to/haetae.config.js [<other-options>] <command>
```

<Callout>
**Config File Priority**<br/>
1. The option `-c, --config`
2. Environment variable `$HAETAE_CONFIG_FILE`
3. Finding `haetae.config.js` by walking up parent directories recursively from [`process.cwd{:ts}`](https://nodejs.org/api/process.html#processcwd)
</Callout>

#### Conflicts

This option should not be used with these options.

- [`-i, --info{:sh}`](#-i---info)
- [`-h, --help{:sh}`](#-h---help)
- [`-v, --version{:sh}`](#-v---version)

### `-s, --store`
<br/>
<small>(**Type** : `string`, **Default**: Read "*Store File Priority*" section below)</small>

A store file path.

#### Usage

```sh
$ haetae --store path/to/.haetae/store.json [<other-options>] <command>
$ haetae --store path/to/dir [<other-options>] <command>
```

If the value does not end with `.json`, `store.json` would be appended.<br/>
For instance, `--store path/to/dir` is identical to `--store path/to/dir/store.json`.

<Callout>
**Store File Priority**<br/>
1. The option `-s, --store`
2. [`storeFile`](./apis/haetae-core#haetaepreconfig) in config file.
3. <TokenLinkCode tokens={{'directory-of-config-file': './apis/haetae-core#getconfigdirname'}}>`<directory-of-config-file>/.haetae/store.json{:sh}`</TokenLinkCode>
</Callout>

#### Conflicts

This option should not be used with these options.

- [`-i, --info{:sh}`](#-i---info)
- [`-h, --help{:sh}`](#-h---help)
- [`-v, --version{:sh}`](#-v---version)

### `-e, --env`
<br/>
<small>(**Type** : `boolean`, **Default**: `false{:ts}`)</small>

#### When used with `<command>{:sh}`

`env` of the `<command>{:sh}` in the config file is evaluated.<br/>
The evaluated value, which is the current `env`, is shown on the shell.
```sh
$ haetae --env <command>
```

#### When used with `-r, --record{:sh}` and `<command>{:sh}`

The `<command>{:sh}`'s record for current `env` is shown.<br/>
This means, `env` in the config file is evaluated, and the command's record matching with the evaluated `env` is searched from the store file.

```sh
$ haetae --record --env <command>
```

#### When used with `-d, --record-data{:sh}` and `<command>{:sh}`

The `<command>{:sh}`'s *Record Data* for current `env` is shown.<br/>
This means, `env` in the config file is evaluated, and the command's *Record Data* matching with the evaluated `env` is searched from the store file.

```sh
$ haetae --record-data --env <command>
```

#### Conflicts

This option should not be used with these options.

- [`-i, --info{:sh}`](#-i---info)
- [`-h, --help{:sh}`](#-h---help)
- [`-v, --version{:sh}`](#-v---version)

### `-r, --record`
<br/>
<small>(**Type** : `boolean`, **Default**: `false{:ts}`)</small>

#### When used alone

Content of store file is shown.

```sh
$ haetae --record
```

#### When used with command

A list of every records of the command is shown.

```sh
$ haetae --record <command>
```

#### When used with `-e, --env` and `<command>{:sh}`

The `<command>{:sh}`'s record for current `env` is shown.<br/>
This means, `env` in the config file is resolved, and the command's record matching with the resolved `env` is searched from the store file.

```sh
$ haetae --record --env <command>
```

#### Conflicts

This option should not be used with these options.

- [`-d, --record-data{:sh}`](#-d---record-data)
- [`-i, --info{:sh}`](#-i---info)
- [`-h, --help{:sh}`](#-h---help)
- [`-v, --version{:sh}`](#-v---version)

### `-d, --record-data`
<br/>
<small>(**Type** : `boolean`, **Default**: `false`)</small>

#### When used with command

A list of every *Record Data* of the command is shown.

```sh
$ haetae --record-data <command>
```

#### When used with `-e, --env` and `<command>{:sh}`

The `<command>{:sh}`'s *Record Data* for current `env` is shown.<br/>
This means, `env` in the config file is resolved, and the command's *Record Data* matching with the resolved `env` is searched from the store file.

```sh
$ haetae --record-data --env <command>
```

#### Conflicts

This option should not be used with these options.

- [`-r, --record{:sh}`](#-r---record)
- [`-i, --info{:sh}`](#-i---info)
- [`-h, --help{:sh}`](#-h---help)
- [`-v, --version{:sh}`](#-v---version)

### `-i, --info`
<br/>
<small>(**Type** : `boolean`, **Default**: `false{:ts}`)</small>

If specified, comprehensive information about the running environment is shown.<br/>
The information is also automatically copied to the clipboard, without ANSI color code.<br/>
**You can attach the result when [reporting an issue](https://github.com/jjangga0214/haetae/issues)**.

<Callout>
**Why auto-copied without ANSI color code?**<br/>
ANSI color code is good for readability on terminal.
However, many sites (e.g. GitHub), chat apps (e.g. Slack), and note-taking apps (e.g. Notion) do not support ANSI color code.
This hinders ease of sharing and reporting. That's why plain text is copied to the clipboard.
</Callout>

#### Usage

```sh
$ haetae --info
```

#### Conflicts

This option should not be used with other options, except [``-j, --json``](#-j---json).

### `-j, --json`
<br/>
<small>(**Type** : `boolean`, **Default**: `false{:ts}`)</small>

This option exists for programatic use (e.g. unix pipeline).<br/>
If specified, the result (**stdout**, **stderr**) would be expressed in JSON format without ANSI color code.<br/>

#### Usage

You can freely use this option to transform any result into JSON.

```sh
$ haetae --json [<other-options>] [<command>]
```

For examples,

```sh
$ haetae --record --json
$ haetae --record --json <command>
$ haetae --record --env --json <command>
$ haetae --record-data --json <command>
$ haetae --record-data --env --json <command>
$ haetae --env --json <command>
$ haetae --info --json
```

#### Conflicts

This option should not be used with these options.

- [`-h, --help{:sh}`](#-h---help)
- [`-v, --version{:sh}`](#-v---version)
